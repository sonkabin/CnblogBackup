## Vim解决问题的方式

###  `.`命令

会重复上次**修改**，修改的定义是从进入插入模式到退出插入模式，这其中的操作都记为一次修改，比如`a(进入插入模式);ESC(退出插入模式)`是一次修改

```bash
>G 会增加从当前行到文档末尾的缩进层级。如果在该命令后使用 . 命令，那么会让Vim增加从当前行到文档末尾的缩进层级。
```

### 不要自我重复

有些命令是其他命令的组合

| 复合命令 | 等效的长命令 | 含义                                       |
| -------- | ------------ | ------------------------------------------ |
| `C`      | `c$`         | 删除当前行光标到末尾的内容，并进入插入模式 |
| `s`      | `cl`         | 删除当前光标所在的字符，并进入插入模式     |
| `S`      | `^C`         | 删除整行，并进入插入模式                   |
| `I`      | `^i`         | 光标到行首，并进入插入模式                 |
| `A`      | `$a`         | 光标到行尾，并进入插入模式                 |

### 以退为进

```bash
# 使用 f{char} 找到字符，然后进行修改，比如 `s + ESC`，最后可以使用 `;` 找到下一个字符，使用 `.` 重复操作；也可以使用 `,` 找到上一个字符重复操作
```

### 执行、重复、回退

| 目的                     | 操作                | 重复 | 回退 |
| ------------------------ | ------------------- | ---- | ---- |
| 做出一个修改             |                     | `.`  | `u`  |
| 在行内查找下一个指定字符 | `f{char}`           | `;`  | `,`  |
| 在行内查找上一个指定字符 | `F{char}`           | `;`  | `,`  |
| 在文档中查找下一处匹配   | `/pattern`          | `n`  | `N`  |
| 在文档中查找上一处匹配   | `?pattern`          | `n`  | `N`  |
| 执行替换                 | `:s/target/replace` | `&`  | `u`  |
| 执行一系列修改           | `qx{change}q`       | `@x` | `u`  |

### 查找并手动替换

除了用`/pattern`之外，还可以通过先移动到一个单词上，然后按`*`（光标会跳到下一个匹配项上，且所有出现该词的地方都会高亮。如果没有看到高亮，运行`:set hls`）

`cw`会删除从光标位置到单词结尾之间的字符，并进入插入模式。

## 普通模式

### 构造可重复的修改

Vim对重复操作进行了优化，要利用这一点，必须要考虑如何构造修改。

评价指标是：

1. 先看按键次数，按键次数越少效率最高
2. 按键次数相同时，看哪张操作可以重复

```bash
# 假设光标停在结尾的h上，需求是删除单词nigh
The end is nigh

# 1. 反向删除。db x。db表示删除从光标起始到单词开头的内容，x删除光标所处的字符。
# 2. 正向删除。b dw。b移动到单词开头，dw删除整个单词。
# 3. 删除整个单词。可以使用精准的 aw 文本对象(text object)。daw 可以解读为"delete a word"
# 第三种方式是可以通过 `.` 重复的
```

### 用次数做简单的算术运算

`Crtl+a`和`Ctrl+x`分别对数字执行加和减操作，在不带次数执行时，它们逐个加减，但如果带一个次数前缀，那么可以用它们加减任意数。如果光标不在数字上，`Crtl+a`会在当前行正向查找一个数字，跳转到那个数字并加上数。

Vim的缺省行为会把以0开头的数字解释为8进制，为了让Vim将所有的数字都当成十进制，配置`set nrformats`

### 能够重复，就别用次数

能用`.`重复的，就不要用次数，因为计数有时候并不准确。

```bash
d2w # 删除两个单词 
dw . # 删除两个单词，但这个操作可以通过.重复
```

### 双剑合璧，天下无敌

